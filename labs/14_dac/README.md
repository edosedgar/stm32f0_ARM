## Задание 14 "dac"

### Общие слова

В данной работе демонстрируется пример работы с ЦАП. Здесь просто выводится постоянное значение около 0.188V (преобразование вызывается каждую секунду с одним и тем же значением). С небольшими изменениями можно получить простенький генератор сигнала на нужной частоте.

### Настройка АЦП

Необходимо, помимо самого АЦП, настроить пин PA4 на аналоговый режим, чтобы вообще что-то вывести с модуля АЦП в овнешний мир.

```c
    LL_AHB1_GRP1_EnableClock(LL_AHB1_GRP1_PERIPH_GPIOA);
    LL_GPIO_SetPinMode(GPIOC, LL_GPIO_PIN_4, LL_GPIO_MODE_ANALOG);
```

Конфигурация АЦП:

```c
    LL_APB1_GRP1_EnableClock(LL_APB1_GRP1_PERIPH_DAC1);
    LL_DAC_EnableTrigger(DAC1, LL_DAC_CHANNEL_1); // включаем триггер
    LL_DAC_SetTriggerSource(DAC1, LL_DAC_CHANNEL_1, LL_DAC_TRIG_EXT_TIM2_TRGO); // источник триггера - TIM2
    LL_DAC_SetOutputBuffer(DAC1, LL_DAC_CHANNEL_1,       // дополнительный выходной буфер
                           LL_DAC_OUTPUT_BUFFER_ENABLE); // для большего выхдного тока
    LL_DAC_ConvertData12RightAligned(DAC1, LL_DAC_CHANNEL_1, 0xFF); // 0xFF - значение, которое выводим
    LL_DAC_Enable(DAC1, LL_DAC_CHANNEL_1);
```

Само использование модуля сидит в строчке `LL_DAC_ConvertData12RightAligned(DAC1, LL_DAC_CHANNEL_1, 0xFF);`. Изменяя значение на другое, на выходе получится соответствующее напряжение. Стоит учесть, что сам вывод этого значения происходит по таймеру раз в секунду. Если выключить триггер в модуле АЦП, преобразование будет происходить сразу после изменения значения в регистре АЦП, что в некоторых случаях удобно.

### Дополнительное задание

В качестве дополнительного задания можно сделать простенький генератор сигнала. Для этого есть два способа: выводить по таймеру нужные значения либо заготовить значения заранее и прогнать их через DMA.
